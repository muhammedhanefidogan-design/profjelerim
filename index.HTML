<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YKS Pro - Online</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .chat-area::-webkit-scrollbar { width: 6px; }
        .chat-area::-webkit-scrollbar-thumb { background-color: #4b5563; border-radius: 10px; }
        .msg-user { background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; border-radius: 12px 12px 0 12px; align-self: flex-end; }
        .msg-bot { background-color: #374151; color: #e5e7eb; border-radius: 12px 12px 12px 0; align-self: flex-start; }
        .sidebar-scroll::-webkit-scrollbar { width: 4px; }
        .sidebar-scroll::-webkit-scrollbar-thumb { background-color: #475569; }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 min-h-screen flex flex-col">

    <nav class="bg-slate-800 p-4 shadow-xl sticky top-0 z-50 border-b border-slate-700">
        <div class="container mx-auto flex justify-between items-center">
            <div class="text-xl font-bold flex items-center text-white">
                <i class="fa-solid fa-graduation-cap text-yellow-400 me-3 text-2xl"></i>
                YKS ASÄ°STANI
            </div>
            <div class="flex space-x-2 bg-slate-700 p-1 rounded-lg">
                <button onclick="switchTab('archive')" id="btn-archive" class="px-3 py-2 rounded-md font-bold text-xs md:text-sm transition bg-indigo-600 text-white shadow">ARÅžÄ°V</button>
                <button onclick="switchTab('planner')" id="btn-planner" class="px-3 py-2 rounded-md font-bold text-xs md:text-sm transition text-slate-300 hover:bg-slate-600">AJANDA</button>
                <button onclick="switchTab('mentor')" id="btn-mentor" class="px-3 py-2 rounded-md font-bold text-xs md:text-sm transition text-slate-300 hover:bg-slate-600">MENTOR</button>
            </div>
        </div>
    </nav>

    <div class="container mx-auto mt-6 p-4 max-w-7xl flex-grow h-full">

        <div id="archive" class="tab-content active">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-white">Ã‡Ä±kmÄ±ÅŸ Sorular</h2>
                <p class="text-slate-400 text-sm">PDF dosyalarÄ± index.html ile yan yana olmalÄ±.</p>
            </div>
            <div class="flex flex-wrap justify-center gap-6">
                <div class="w-full md:w-[30%] bg-slate-800 p-6 rounded-xl border-t-4 border-indigo-500 shadow-lg hover:bg-slate-750 transition flex flex-col">
                    <h3 class="text-xl font-bold text-indigo-400 mb-2 text-center">TYT (TÃ¼mÃ¼)</h3>
                    <a href="tyt.pdf" target="_blank" class="mt-auto block w-full bg-indigo-600 text-white text-center py-3 rounded-lg font-bold hover:bg-indigo-500">AÃ‡</a>
                </div>
                <div class="w-full md:w-[30%] bg-slate-800 p-6 rounded-xl border-t-4 border-red-500 shadow-lg hover:bg-slate-750 transition flex flex-col">
                    <h3 class="text-xl font-bold text-red-400 mb-2 text-center">AYT SayÄ±sal</h3>
                    <a href="ayt-say.pdf" target="_blank" class="mt-auto block w-full bg-red-600 text-white text-center py-3 rounded-lg font-bold hover:bg-red-500">AÃ‡</a>
                </div>
                <div class="w-full md:w-[30%] bg-slate-800 p-6 rounded-xl border-t-4 border-blue-500 shadow-lg hover:bg-slate-750 transition flex flex-col">
                    <h3 class="text-xl font-bold text-blue-400 mb-2 text-center">AYT EA</h3>
                    <a href="ayt-ea.pdf" target="_blank" class="mt-auto block w-full bg-blue-600 text-white text-center py-3 rounded-lg font-bold hover:bg-blue-500">AÃ‡</a>
                </div>
                <div class="w-full md:w-[30%] bg-slate-800 p-6 rounded-xl border-t-4 border-pink-500 shadow-lg hover:bg-slate-750 transition flex flex-col">
                    <h3 class="text-xl font-bold text-pink-400 mb-2 text-center">AYT SÃ¶zel</h3>
                    <a href="ayt-soz.pdf" target="_blank" class="mt-auto block w-full bg-pink-600 text-white text-center py-3 rounded-lg font-bold hover:bg-pink-500">AÃ‡</a>
                </div>
                <div class="w-full md:w-[30%] bg-slate-800 p-6 rounded-xl border-t-4 border-green-500 shadow-lg hover:bg-slate-750 transition flex flex-col">
                    <h3 class="text-xl font-bold text-green-400 mb-2 text-center">YDT (Dil)</h3>
                    <a href="ydt.pdf" target="_blank" class="mt-auto block w-full bg-green-600 text-white text-center py-3 rounded-lg font-bold hover:bg-green-500">AÃ‡</a>
                </div>
            </div>
        </div>

        <div id="planner" class="tab-content">
            <div class="max-w-3xl mx-auto bg-slate-800 p-8 rounded-2xl shadow-xl border border-slate-700">
                <h2 class="text-2xl font-bold text-white mb-6 flex items-center">
                    <i class="fa-solid fa-microphone-lines text-yellow-400 me-3"></i>KonuÅŸan Alarm
                </h2>
                <div class="grid grid-cols-1 gap-6 mb-6">
                    <div>
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Ders / Konu</label>
                        <input type="text" id="taskInput" placeholder="Ã–rn: Matematik Denemesi" class="w-full p-3 bg-slate-900 border border-slate-600 rounded-lg text-white focus:border-yellow-500 focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Alarm Ne Desin?</label>
                        <div class="flex gap-2">
                            <input type="text" id="voiceMessageInput" placeholder="Ã–rn: Kalk lan gofik ders vakti!" class="w-full p-3 bg-slate-900 border border-blue-500 rounded-lg text-white focus:border-yellow-500 focus:outline-none">
                            <button onclick="previewVoice()" class="bg-blue-600 hover:bg-blue-500 text-white px-4 rounded-lg font-bold text-sm whitespace-nowrap">SES TEST</button>
                        </div>
                    </div>
                    <div>
                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Zaman</label>
                        <input type="datetime-local" id="dateInput" class="w-full p-3 bg-slate-900 border border-slate-600 rounded-lg text-white focus:border-yellow-500 focus:outline-none">
                    </div>
                </div>
                <button onclick="addTask()" class="w-full bg-yellow-500 hover:bg-yellow-600 text-slate-900 font-extrabold py-4 rounded-xl transition transform active:scale-95 shadow-lg">ALARMI KAYDET</button>
                <div class="mt-8">
                    <h3 class="text-sm font-bold text-slate-500 uppercase mb-3 border-b border-slate-700 pb-2">Kurulu Alarmlar</h3>
                    <ul id="taskList" class="space-y-3"></ul>
                    <div id="emptyMsg" class="text-center text-slate-600 py-4 italic">HenÃ¼z kurulu alarm yok.</div>
                </div>
            </div>
        </div>

        <div id="mentor" class="tab-content h-full">
            <div class="max-w-6xl mx-auto bg-slate-800 h-[650px] rounded-2xl shadow-2xl border border-slate-700 flex overflow-hidden">
                <div class="w-1/4 bg-slate-900 border-r border-slate-700 flex flex-col hidden md:flex">
                    <div class="p-4 border-b border-slate-700">
                        <button onclick="startNewChat()" class="w-full bg-indigo-600 hover:bg-indigo-500 text-white py-3 rounded-lg text-sm font-bold transition shadow-lg flex items-center justify-center gap-2">
                            <i class="fa-solid fa-plus"></i> YENÄ° SOHBET
                        </button>
                    </div>
                    <div class="p-2 bg-slate-950 text-xs font-bold text-slate-400 uppercase text-center">KayÄ±tlÄ± GeÃ§miÅŸ</div>
                    <div id="saved-chats-list" class="sidebar-scroll flex-grow overflow-y-auto p-2 space-y-2"></div>
                </div>
                <div class="flex-grow flex flex-col bg-slate-800 w-full md:w-3/4">
                    <div class="bg-slate-900 p-4 border-b border-slate-700 flex justify-between items-center">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-tr from-indigo-600 to-purple-600 flex items-center justify-center text-white text-xl me-3 shadow-lg">
                                <i class="fa-solid fa-robot"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-white text-sm md:text-base">YKS KoÃ§u</h3>
                                <div class="text-xs text-green-400 flex items-center font-medium"><span class="w-2 h-2 bg-green-500 rounded-full me-1 animate-pulse"></span> Ã‡evrimiÃ§i</div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="saveCurrentSession()" class="bg-slate-700 hover:bg-green-600 text-white px-3 py-2 rounded-lg text-xs font-bold transition flex items-center" title="Sola Kaydet">
                                <i class="fa-solid fa-floppy-disk me-1"></i> <span class="hidden md:inline">KAYDET</span>
                            </button>
                            <button onclick="startNewChat()" class="bg-slate-700 hover:bg-red-600 text-white w-9 h-9 rounded-lg flex items-center justify-center transition" title="Temizle">
                                <i class="fa-solid fa-trash-can"></i>
                            </button>
                        </div>
                    </div>
                    <div id="chat-area" class="chat-area flex-grow p-6 overflow-y-auto flex flex-col gap-4 bg-slate-800/50"></div>
                    <div class="p-4 bg-slate-900 border-t border-slate-700 flex gap-2">
                        <input type="text" id="chatInput" placeholder="Derdini anlat veya 'Bilal' yaz..." 
                            class="flex-grow p-4 bg-slate-800 border border-slate-600 rounded-xl text-white focus:border-indigo-500 focus:outline-none transition"
                            onkeypress="if(event.key === 'Enter') sendMessage()">
                        <button onclick="sendMessage()" class="bg-indigo-600 hover:bg-indigo-500 text-white w-14 h-14 rounded-xl flex items-center justify-center transition shadow-lg transform active:scale-95">
                            <i class="fa-solid fa-paper-plane text-xl"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // DEÄžÄ°ÅžKENLER
        let waitingForBilalConfirm = false;
        let currentChat = []; 
        let savedSessions = JSON.parse(localStorage.getItem('yksSavedSessions')) || [];
        let tasks = JSON.parse(localStorage.getItem('yksTasks')) || [];

        function switchTab(tn){document.querySelectorAll('.tab-content').forEach(e=>e.classList.remove('active'));document.getElementById(tn).classList.add('active');['btn-archive','btn-planner','btn-mentor'].forEach(id=>{document.getElementById(id).className="px-3 py-2 rounded-md font-bold text-xs md:text-sm transition text-slate-300 hover:bg-slate-600"});const a=document.getElementById('btn-'+tn);if(tn==='archive')a.className="px-3 py-2 rounded-md font-bold text-xs md:text-sm transition bg-indigo-600 text-white shadow";else if(tn==='planner')a.className="px-3 py-2 rounded-md font-bold text-xs md:text-sm transition bg-yellow-500 text-slate-900 shadow";else if(tn==='mentor')a.className="px-3 py-2 rounded-md font-bold text-xs md:text-sm transition bg-green-600 text-white shadow";}

        document.addEventListener('DOMContentLoaded', () => {
            loadCurrentChat();
            renderSidebar();
            if (Notification.permission !== "granted") Notification.requestPermission();
            renderTasks();
            setInterval(checkReminders, 2000);
        });

        // CHAT FONKSÄ°YONLARI
        function sendMessage() {
            const i = document.getElementById('chatInput');
            const msg = i.value.trim();
            if (msg === "") return;
            addMsgToScreen(msg, 'user');
            currentChat.push({ msg, sender: 'user' });
            i.value = '';
            setTimeout(() => {
                const reply = getBotResponse(msg.toLowerCase());
                addMsgToScreen(reply, 'bot');
                currentChat.push({ msg: reply, sender: 'bot' });
            }, 600);
        }

        function addMsgToScreen(msg, sender) {
            const c = document.getElementById('chat-area');
            const div = document.createElement('div');
            div.className = sender === 'user' ? "msg-user p-4 max-w-[80%] shadow-md mb-2" : "msg-bot p-4 max-w-[80%] shadow-md mb-2";
            div.innerHTML = msg;
            c.appendChild(div);
            c.scrollTop = c.scrollHeight;
        }

        function loadCurrentChat() {
            const c = document.getElementById('chat-area');
            c.innerHTML = '';
            if(currentChat.length === 0) {
                 addMsgToScreen("Selam ÅŸampiyon! ðŸ‘‹ <br>Ben Mentorun. <br><b>'bilal'</b> yazarsan sÃ¼rpriz var!", 'bot');
            } else {
                currentChat.forEach(m => addMsgToScreen(m.msg, m.sender));
            }
        }

        function saveCurrentSession() {
            if (currentChat.length === 0) { alert("Kaydedilecek mesaj yok."); return; }
            const name = prompt("Sohbete isim ver:");
            if (name) {
                const session = { id: Date.now(), name: name, data: [...currentChat], date: new Date().toLocaleDateString() };
                savedSessions.push(session);
                localStorage.setItem('yksSavedSessions', JSON.stringify(savedSessions));
                renderSidebar();
                alert("Kaydedildi! âœ…");
            }
        }

        function renderSidebar() {
            const list = document.getElementById('saved-chats-list');
            list.innerHTML = '';
            if(savedSessions.length === 0) {
                list.innerHTML = '<div class="text-xs text-slate-600 text-center mt-4">HenÃ¼z kayÄ±t yok.</div>';
            } else {
                savedSessions.forEach(session => {
                    const div = document.createElement('div');
                    div.className = "bg-slate-800 hover:bg-slate-700 p-3 rounded-lg cursor-pointer group flex justify-between items-center transition border border-slate-700 mb-2";
                    div.onclick = () => loadSession(session.id);
                    div.innerHTML = `<div class="truncate overflow-hidden w-32"><div class="text-sm font-bold text-slate-200 group-hover:text-white truncate">${session.name}</div><div class="text-xs text-slate-500">${session.date}</div></div><button onclick="deleteSession(event, ${session.id})" class="text-slate-600 hover:text-red-400 p-1"><i class="fa-solid fa-xmark"></i></button>`;
                    list.appendChild(div);
                });
            }
        }

        function loadSession(id) {
            const session = savedSessions.find(s => s.id === id);
            if(session) { currentChat = [...session.data]; loadCurrentChat(); }
        }

        function deleteSession(e, id) {
            e.stopPropagation();
            if(confirm("Sileyim mi?")) {
                savedSessions = savedSessions.filter(s => s.id !== id);
                localStorage.setItem('yksSavedSessions', JSON.stringify(savedSessions));
                renderSidebar();
            }
        }

        function startNewChat() { currentChat = []; loadCurrentChat(); }

        function getBotResponse(m) {
            if (waitingForBilalConfirm) {
                if (m.includes("evet") || m.includes("yes") || m.includes("Ã§al")) {
                    waitingForBilalConfirm = false;
                    new Audio('bilal.mp3').play().catch(e => alert("Ses dosyasÄ± (bilal.mp3) yan klasÃ¶rde olmalÄ±!"));
                    return "ðŸ”Š AnlaÅŸÄ±ldÄ± BaÅŸkan! GiriÅŸ mÃ¼ziÄŸi Ã§alÄ±yor... ðŸ‘‘";
                } else {
                    waitingForBilalConfirm = false;
                    return "TamamdÄ±r kral, Ã§almÄ±yorum.";
                }
            }
            if (m.includes("bilal")) {
                waitingForBilalConfirm = true;
                return "Merhaba Bilal Bey, sanÄ±rÄ±m bu ses dosyasÄ± size ait. Ã‡almamÄ± ister misiniz? (Evet/HayÄ±r)";
            }
            if(m.includes("merhaba"))return "Selam kral!";
            if(m.includes("stres"))return "Sakin ol ÅŸampiyon. Derin nefes al.";
            if(m.includes("netlerim"))return "Plato dÃ¶nemindesin. Bol soru Ã§Ã¶z.";
            if(m.includes("matematik"))return "FormÃ¼l ezberleme, mantÄ±ÄŸÄ±nÄ± kavra.";
            return "AnladÄ±m kral. Biraz daha detay ver.";
        }

        // AJANDA
        function speakText(t){if('speechSynthesis' in window){window.speechSynthesis.cancel();const u=new SpeechSynthesisUtterance(t);u.lang='tr-TR';u.rate=0.9;window.speechSynthesis.speak(u);}}
        function previewVoice(){const m=document.getElementById('voiceMessageInput').value;speakText(m.trim()===""?"Test ses.":m);}
        
        function addTask(){
            const tI=document.getElementById('taskInput'),vI=document.getElementById('voiceMessageInput'),dI=document.getElementById('dateInput');
            if(tI.value===''||dI.value===''){alert("Eksik bilgi.");return;}
            let f=vI.value.trim()===""?"Dikkat! "+tI.value+" zamanÄ±.":vI.value;
            tasks.push({id:Date.now(),note:tI.value,voiceMsg:f,time:dI.value,notified:false});
            saveTasks();renderTasks();speakText("PlanlandÄ±.");tI.value='';vI.value='';dI.value='';
        }
        function deleteTask(id){if(confirm('Silinsin mi?')){tasks=tasks.filter(t=>t.id!==id);saveTasks();renderTasks();}}
        function saveTasks(){localStorage.setItem('yksTasks',JSON.stringify(tasks));}
        function renderTasks(){
            const l=document.getElementById('taskList'),e=document.getElementById('emptyMsg');
            if(!l)return;l.innerHTML='';
            if(tasks.length===0)e.style.display='block';else{e.style.display='none';tasks.sort((a,b)=>new Date(a.time)-new Date(b.time));tasks.forEach(t=>{const d=new Date(t.time).toLocaleString('tr-TR',{day:'numeric',month:'short',hour:'2-digit',minute:'2-digit'});l.innerHTML+=`<li class="bg-slate-700 p-4 rounded-xl flex justify-between items-center shadow border border-slate-600 ${t.notified?'opacity-50':''}"><div class="w-full"><div class="flex justify-between mb-1"><span class="text-yellow-400 font-bold text-xs bg-slate-800 px-2 py-1 rounded">${d}</span></div><div class="text-white font-bold">${t.note}</div><div class="text-indigo-300 text-xs italic">"${t.voiceMsg}"</div></div><button onclick="deleteTask(${t.id})" class="text-red-400 p-3 ms-2 hover:bg-slate-600 rounded-full"><i class="fa-solid fa-trash"></i></button></li>`;});}
        }
        function checkReminders(){
            const n=new Date();
            tasks.forEach(t=>{
                if(n>=new Date(t.time)&&!t.notified){
                    if(Notification.permission==="granted")new Notification("ðŸ”” "+t.note);
                    speakText(t.voiceMsg);t.notified=true;saveTasks();renderTasks();
                }
            });
        }
    </script>
</body>
</html>